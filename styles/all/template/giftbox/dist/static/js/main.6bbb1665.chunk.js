(this.webpackJsonpgiftbox=this.webpackJsonpgiftbox||[]).push([[0],{10:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(3),s=a.n(c),i=a(1),o=(a(9),r.a.createContext()),u=r.a.createContext(),l=function(e){var t=Object(n.useContext)(o),a=t.unwrapStatus,c=t.unwrapStatusDispatch,s=Object(n.useContext)(u),i=(s.receivedGift,s.receivedGiftDispatch),l=function(){fetch("/app.php/snahp/giftbox/unwrap/").then((function(e){return e.json()})).then((function(e){i({type:"UPDATE_GIFT",gift:e.item})})),c({type:"SET_STATUS_OPENED"})};return r.a.createElement("div",{className:"gift_closed_wrapper"},"closed"===a.status?r.a.createElement((function(e){return"closed"===e.unwrapStatus.status?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"gift_closed_content"},r.a.createElement("button",{onClick:l,type:"button",className:"unwrap_btn"},r.a.createElement("img",{className:"gift_wreath_image",src:"https://i.imgur.com/B3fsORS.png",alt:""})))):""}),{unwrapStatus:a}):"")},m=function(e,t){var a=t-e.toString().length+1;return Array(+(a>0&&a)).join("0")+e},f=function(e){var t=e.time_left,a=Object(n.useState)(t),c=Object(i.a)(a,2),s=c[0],u=c[1],l=Object(n.useContext)(o),f=(l.unwrapStatus,l.unwrapStatusDispatch),p=function(e){var t=Math.floor(e/60),a=m(e%60,2);return[m(Math.floor(t/60),2),m(t%60,2),a]}(s),d=Object(i.a)(p,3),E=d[0],_=d[1],g=d[2];return Object(n.useEffect)((function(){var e=setInterval((function(){s<=0?(clearInterval(e),f({type:"SET_STATUS_CLOSED"})):u(s-=1)}),1e3)}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"giftbox_countdown_hours"},E),r.a.createElement("span",{className:"giftbox_countdown_minutes"},_),r.a.createElement("span",{className:"giftbox_countdown_seconds"},g))},p=function(e){var t=Object(n.useContext)(o),a=t.unwrapStatus;t.unwrapStatusDispatch;return console.log("::DisplayGiftStatus"),console.log(a),"not_ready"===a.status?r.a.createElement("div",{className:"display_gift_status"},r.a.createElement("img",{className:"giftbox_status_image",src:"https://i.imgur.com/8aA85qP.jpg"}),r.a.createElement(f,a)):""},d=function(e){var t=e.type,a=(e.title,e.description,e.img_url);return void 0!==t&&r.a.createElement("div",{className:"received-gift-wrapper"},r.a.createElement("div",{className:"received-gift-content"},r.a.createElement("img",{className:"giftbox-img",src:a,alt:""})))},E=function(e){var t=Object(n.useContext)(u),a=t.receivedGift;t.receivedGiftDispatch;return r.a.createElement("div",null,r.a.createElement(d,a))},_=function(e,t){switch(t.type){case"SET_STATUS_CLOSED":return{status:"closed"};case"SET_STATUS_OPENED":return{status:"opened"};case"SET_STATUS_NOT_READY":return{status:"not_ready",time_left:t.time_left};default:return e}},g=function(e,t){switch(t.type){case"UPDATE_GIFT":return t.gift;default:return e}},v=function(e){var t=Object(n.useReducer)(_,{status:""}),a=Object(i.a)(t,2),c=a[0],s=a[1],m=Object(n.useReducer)(g,{item_type:void 0}),f=Object(i.a)(m,2),d=f[0],v=f[1];return Object(n.useEffect)((function(){fetch("/app.php/snahp/giftbox/unwrap_status/").then((function(e){return e.json()})).then((function(e){switch(console.log("::App.js"),console.log(e),e.status){case"not_ready":s({type:"SET_STATUS_NOT_READY",time_left:e.time_left});break;case"closed":default:s({type:"SET_STATUS_CLOSED"})}}))}),[]),r.a.createElement("div",{className:"giftbox-wrapper"},r.a.createElement(o.Provider,{value:{unwrapStatus:c,unwrapStatusDispatch:s}},r.a.createElement(u.Provider,{value:{receivedGift:d,receivedGiftDispatch:v}},r.a.createElement(p,null),r.a.createElement(E,null),r.a.createElement(l,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(v,null),document.getElementById("christmas-giveaway")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},4:function(e,t,a){e.exports=a(10)},9:function(e,t,a){}},[[4,1,2]]]);
//# sourceMappingURL=main.6bbb1665.chunk.js.map